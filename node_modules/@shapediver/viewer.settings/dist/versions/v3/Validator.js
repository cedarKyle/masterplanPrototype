"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.validate = void 0;
const joi_1 = __importDefault(require("joi"));
const orbitControlsSchema = joi_1.default.object({
    autoRotationSpeed: joi_1.default.number().unsafe(),
    damping: joi_1.default.number().unsafe().min(0),
    enableAutoRotation: joi_1.default.boolean(),
    enableKeyPan: joi_1.default.boolean(),
    enablePan: joi_1.default.boolean(),
    enableRotation: joi_1.default.boolean(),
    enableZoom: joi_1.default.boolean(),
    input: { keys: { up: joi_1.default.number().unsafe(), down: joi_1.default.number().unsafe(), left: joi_1.default.number().unsafe(), right: joi_1.default.number().unsafe() }, mouse: { rotate: joi_1.default.number().unsafe(), zoom: joi_1.default.number().unsafe(), pan: joi_1.default.number().unsafe() }, touch: { rotate: joi_1.default.number().unsafe(), zoom: joi_1.default.number().unsafe(), pan: joi_1.default.number().unsafe() }, },
    keyPanSpeed: joi_1.default.number().unsafe().min(0).max(1),
    movementSmoothness: joi_1.default.number().unsafe().min(0).max(1),
    restrictions: joi_1.default.object({
        position: {
            cube: { min: { x: joi_1.default.number().unsafe().allow(-Infinity).allow(null), y: joi_1.default.number().unsafe().allow(-Infinity).allow(null), z: joi_1.default.number().unsafe().allow(-Infinity).allow(null) }, max: { x: joi_1.default.number().unsafe().allow(Infinity).allow(null), y: joi_1.default.number().unsafe().allow(Infinity).allow(null), z: joi_1.default.number().unsafe().allow(Infinity).allow(null) } },
            sphere: { center: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() }, radius: joi_1.default.number().unsafe().allow(Infinity).allow(null) },
        },
        target: {
            cube: { min: { x: joi_1.default.number().unsafe().allow(-Infinity).allow(null), y: joi_1.default.number().unsafe().allow(-Infinity).allow(null), z: joi_1.default.number().unsafe().allow(-Infinity).allow(null) }, max: { x: joi_1.default.number().unsafe().allow(Infinity).allow(null), y: joi_1.default.number().unsafe().allow(Infinity).allow(null), z: joi_1.default.number().unsafe().allow(Infinity).allow(null) } },
            sphere: { center: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() }, radius: joi_1.default.number().unsafe().allow(Infinity).allow(null) },
        },
        rotation: { minPolarAngle: joi_1.default.number().unsafe(), maxPolarAngle: joi_1.default.number().unsafe(), minAzimuthAngle: joi_1.default.number().unsafe().allow(-Infinity).allow(null), maxAzimuthAngle: joi_1.default.number().unsafe().allow(Infinity).allow(null) },
        zoom: { minDistance: joi_1.default.number().unsafe(), maxDistance: joi_1.default.number().unsafe().allow(Infinity).allow(null) },
    }),
    rotationSpeed: joi_1.default.number().unsafe().min(0).max(1),
    panSpeed: joi_1.default.number().unsafe().min(0).max(1),
    zoomSpeed: joi_1.default.number().unsafe().min(0).max(1),
});
const orthographicControlsSchema = joi_1.default.object({
    damping: joi_1.default.number().unsafe().min(0).max(1),
    enableKeyPan: joi_1.default.boolean(),
    enablePan: joi_1.default.boolean(),
    enableZoom: joi_1.default.boolean(),
    input: { keys: { up: joi_1.default.number().unsafe(), down: joi_1.default.number().unsafe(), left: joi_1.default.number().unsafe(), right: joi_1.default.number().unsafe() }, mouse: { rotate: joi_1.default.number().unsafe(), zoom: joi_1.default.number().unsafe(), pan: joi_1.default.number().unsafe() }, touch: { rotate: joi_1.default.number().unsafe(), zoom: joi_1.default.number().unsafe(), pan: joi_1.default.number().unsafe() }, },
    keyPanSpeed: joi_1.default.number().unsafe().min(0).max(1),
    movementSmoothness: joi_1.default.number().unsafe().min(0).max(1),
    panSpeed: joi_1.default.number().unsafe().min(0).max(1),
    zoomSpeed: joi_1.default.number().unsafe().min(0).max(1),
});
const orthographicCameraSchema = joi_1.default.object({
    name: joi_1.default.string().optional(),
    type: joi_1.default.string(),
    autoAdjust: joi_1.default.boolean(),
    cameraMovementDuration: joi_1.default.number().unsafe().min(0),
    controls: orthographicControlsSchema,
    enableCameraControls: joi_1.default.boolean(),
    position: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
    revertAtMouseUp: joi_1.default.boolean(),
    revertAtMouseUpDuration: joi_1.default.number().unsafe().min(0),
    target: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
    zoomExtentsFactor: joi_1.default.number().unsafe().positive(),
});
const perspectiveCameraSchema = joi_1.default.object({
    name: joi_1.default.string().optional(),
    type: joi_1.default.string(),
    autoAdjust: joi_1.default.boolean(),
    cameraMovementDuration: joi_1.default.number().unsafe().min(0),
    controls: orbitControlsSchema,
    enableCameraControls: joi_1.default.boolean(),
    fov: joi_1.default.number().unsafe().positive(),
    position: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
    revertAtMouseUp: joi_1.default.boolean(),
    revertAtMouseUpDuration: joi_1.default.number().unsafe().min(0),
    target: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
    zoomExtentsFactor: joi_1.default.number().unsafe().positive(),
});
const cameraSchema = joi_1.default.object().pattern(/^/, [perspectiveCameraSchema, orthographicCameraSchema]);
const ambientLightSchema = joi_1.default.object({
    color: joi_1.default.alternatives([joi_1.default.number().unsafe(), joi_1.default.string()]),
    intensity: joi_1.default.number().unsafe().min(0)
});
const directionalLightSchema = joi_1.default.object({
    color: joi_1.default.alternatives([joi_1.default.number().unsafe(), joi_1.default.string()]),
    intensity: joi_1.default.number().unsafe().min(0),
    direction: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
    castShadow: joi_1.default.boolean(),
    shadowMapResolution: joi_1.default.number().unsafe().optional(),
    shadowMapBias: joi_1.default.number().unsafe().optional()
});
const hemisphereLightSchema = joi_1.default.object({
    skyColor: joi_1.default.alternatives([joi_1.default.number().unsafe(), joi_1.default.string()]),
    intensity: joi_1.default.number().unsafe().min(0),
    groundColor: joi_1.default.alternatives([joi_1.default.number().unsafe(), joi_1.default.string()]),
});
const pointLightSchema = joi_1.default.object({
    color: joi_1.default.alternatives([joi_1.default.number().unsafe(), joi_1.default.string()]),
    intensity: joi_1.default.number().unsafe().min(0),
    position: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
    distance: joi_1.default.number().unsafe().min(0),
    decay: joi_1.default.number().unsafe().min(0),
});
const spotLightSchema = joi_1.default.object({
    color: joi_1.default.alternatives([joi_1.default.number().unsafe(), joi_1.default.string()]),
    intensity: joi_1.default.number().unsafe().min(0),
    position: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
    target: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
    distance: joi_1.default.number().unsafe().min(0),
    decay: joi_1.default.number().unsafe().min(0),
    angle: joi_1.default.number().unsafe().min(0),
    penumbra: joi_1.default.number().unsafe().min(0),
});
const lightSchema = joi_1.default.object().pattern(/^/, [
    joi_1.default.object({
        name: joi_1.default.string().optional(),
        lights: joi_1.default.object().pattern(/^/, [
            joi_1.default.object({
                name: joi_1.default.string().optional(),
                type: joi_1.default.string(),
                order: joi_1.default.number().unsafe().optional(),
                properties: joi_1.default.alternatives([ambientLightSchema, directionalLightSchema, hemisphereLightSchema, pointLightSchema, spotLightSchema])
            })
        ])
    })
]);
const schema = joi_1.default.object({
    build_date: joi_1.default.string().allow('').optional(),
    build_version: joi_1.default.string().allow('').optional(),
    settings_version: joi_1.default.string(),
    ar: joi_1.default.object({
        enable: joi_1.default.boolean(),
        autoScaling: joi_1.default.boolean(),
    }).optional(),
    camera: {
        cameraId: joi_1.default.string().allow(''),
        cameras: cameraSchema
    },
    environment: {
        clearAlpha: joi_1.default.number().unsafe().min(0).max(1),
        clearColor: joi_1.default.string(),
        map: joi_1.default.alternatives([joi_1.default.string().allow(''), joi_1.default.array().items(joi_1.default.string())]),
        mapAsBackground: joi_1.default.boolean(),
        mapResolution: joi_1.default.string()
    },
    environmentGeometry: {
        gridVisibility: joi_1.default.boolean(),
        groundPlaneVisibility: joi_1.default.boolean(),
    },
    general: {
        transformation: {
            scale: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
            translation: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() },
            rotation: { x: joi_1.default.number().unsafe(), y: joi_1.default.number().unsafe(), z: joi_1.default.number().unsafe() }
        },
        blurWhenBusy: joi_1.default.boolean(),
        commitSettings: joi_1.default.boolean(),
        commitParameters: joi_1.default.boolean(),
        pointSize: joi_1.default.number().unsafe().min(0),
        showMessages: joi_1.default.boolean(),
    },
    light: {
        lightSceneId: joi_1.default.string().allow('').optional(),
        lightScenes: lightSchema,
    },
    rendering: {
        ambientOcclusion: joi_1.default.boolean(),
        ambientOcclusionIntensity: joi_1.default.number().unsafe().positive().max(1),
        beautyRenderDelay: joi_1.default.number().unsafe().min(0),
        beautyRenderBlendingDuration: joi_1.default.number().unsafe().min(0),
        shadows: joi_1.default.boolean(),
    },
    session: joi_1.default.object().pattern(/^/, [
        joi_1.default.object({
            order: joi_1.default.number().unsafe().optional(),
            displayname: joi_1.default.string().allow('').optional(),
            hidden: joi_1.default.boolean().optional()
        })
    ]),
}).options({ presence: 'required' });
const validate = (s) => {
    const result = joi_1.default.attempt(s, schema);
    s = result.value;
};
exports.validate = validate;
//# sourceMappingURL=Validator.js.map