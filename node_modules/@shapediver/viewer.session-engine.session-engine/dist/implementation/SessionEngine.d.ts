import { SettingsEngine } from '@shapediver/viewer.shared.services';
import { ISessionEngine, ISettingsSections } from '../interfaces/ISessionEngine';
import { ShapeDiverRequestGltfUploadQueryConversion, ShapeDiverResponseDto, ShapeDiverResponseExport } from '@shapediver/sdk.geometry-api-sdk-v2';
import { ISessionTreeNode } from '../interfaces/ISessionTreeNode';
import { ITreeNode } from '@shapediver/viewer.shared.node-tree';
import { IExport } from '../interfaces/dto/IExport';
import { IParameter } from '../interfaces/dto/IParameter';
import { IOutput } from '../interfaces/dto/IOutput';
export declare class SessionEngine implements ISessionEngine {
    #private;
    private readonly _converter;
    private readonly _eventEngine;
    private readonly _exports;
    private readonly _httpClient;
    private readonly _id;
    private readonly _logger;
    private readonly _modelViewUrl;
    private readonly _outputLoader;
    private readonly _outputs;
    private readonly _outputsFreeze;
    private readonly _parameterValues;
    private readonly _parameters;
    private readonly _performanceEvaluator;
    private readonly _sceneTree;
    private readonly _sessionEngineId;
    private readonly _settingsEngine;
    private readonly _stateEngine;
    private readonly _ticket;
    private readonly _uuidGenerator;
    private _automaticSceneUpdate;
    private _bearerToken?;
    private _closeOnFailure;
    private _closed;
    private _customizeOnParameterChange;
    private _dataCache;
    private _excludeViewports;
    private _headers;
    private _initialized;
    private _modelId?;
    private _node;
    private _refreshBearerToken?;
    private _responseDto?;
    private _retryCounter;
    private _sdk;
    private _sessionId?;
    private _updateCallback;
    private _viewerSettings?;
    /**
     * Can be use to initialize a session with the ticket and modelViewUrl and returns a scene graph node with the result.
     * Can be use to customize the session with updated parameters to get the updated scene graph node.
     */
    constructor(properties: {
        id: string;
        ticket: string;
        modelViewUrl: string;
        buildVersion: string;
        buildDate: string;
        bearerToken?: string;
        excludeViewports?: string[];
    });
    get automaticSceneUpdate(): boolean;
    set automaticSceneUpdate(value: boolean);
    get bearerToken(): string | undefined;
    set bearerToken(value: string | undefined);
    get canUploadGLTF(): boolean;
    get customizeOnParameterChange(): boolean;
    set customizeOnParameterChange(value: boolean);
    get excludeViewports(): string[];
    set excludeViewports(value: string[]);
    get exports(): {
        [key: string]: IExport;
    };
    get id(): string;
    get initialized(): boolean;
    get modelViewUrl(): string;
    get node(): ITreeNode;
    get outputs(): {
        [key: string]: IOutput;
    };
    get outputsFreeze(): {
        [key: string]: boolean;
    };
    get parameterValues(): {
        [key: string]: string;
    };
    get parameters(): {
        [key: string]: IParameter<any>;
    };
    get refreshBearerToken(): (() => Promise<string>) | undefined;
    set refreshBearerToken(value: (() => Promise<string>) | undefined);
    get settingsEngine(): SettingsEngine;
    get ticket(): string;
    get updateCallback(): ((newNode: ITreeNode, oldNode: ITreeNode) => void) | null;
    set updateCallback(value: ((newNode: ITreeNode, oldNode: ITreeNode) => void) | null);
    get viewerSettings(): object | undefined;
    applySettings(response: ShapeDiverResponseDto, sections?: ISettingsSections): void;
    canGoBack(): boolean;
    canGoForward(): boolean;
    close(retry?: boolean): Promise<void>;
    /**
     * Customizes the session with updated parameters to get the updated scene graph node.
     *
     * @param parameters the parameter set to update the session
     * @returns promise with a scene graph node
     */
    customize(force?: boolean): Promise<ITreeNode>;
    customizeParallel(parameterValues: {
        [key: string]: string;
    }): Promise<ITreeNode>;
    goBack(): Promise<ITreeNode>;
    goForward(): Promise<ITreeNode>;
    /**
     * Initializes the session with the ticket and modelViewUrl.
     *
     * @returns promise with a scene graph node
     */
    init(parameterValues?: {
        [key: string]: string;
    }, retry?: boolean): Promise<void>;
    /**
     * Load the outputs and return the scene graph node of the result.
     * In case the outputs have a delay property, another customization request with the parameter set is sent.
     *
     * @param parameters the parameter set to update the session
     * @param outputs the outputs to load
     * @returns promise with a scene graph node
     */
    loadOutputsParallel(responseDto: ShapeDiverResponseDto, cancelRequest?: () => boolean, retry?: boolean): Promise<ISessionTreeNode>;
    /**
     * Load the outputs and return the scene graph node of the result.
     * In case the outputs have a delay property, another customization request with the parameter set is sent.
     *
     * @param parameters the parameter set to update the session
     * @param outputs the outputs to load
     * @returns promise with a scene graph node
     */
    loadOutputs(cancelRequest?: () => boolean, retry?: boolean): Promise<ISessionTreeNode>;
    requestExport(exportId: string, parameters: {
        [key: string]: string;
    }, maxWaitTime: number, retry?: boolean): Promise<ShapeDiverResponseExport>;
    resetSettings(sections?: ISettingsSections): void;
    saveDefaultParameterValues(): Promise<boolean>;
    saveDefaultParameters(retry?: boolean): Promise<boolean>;
    /**
     * Save the export properties for displayname, order, tooltip and hidden
     *
     * @param exports
     * @returns
     */
    saveExportProperties(exports: {
        [key: string]: {
            displayname: string;
            hidden: boolean;
            order: number;
            tooltip: string;
        };
    }, retry?: boolean): Promise<boolean>;
    /**
     * Save the output properties for displayname, order, tooltip and hidden
     *
     * @param outputs
     * @returns
     */
    saveOutputProperties(outputs: {
        [key: string]: {
            displayname: string;
            hidden: boolean;
            order: number;
            tooltip: string;
        };
    }, retry?: boolean): Promise<boolean>;
    /**
     * Save the parameter properties for displayname, order, tooltip and hidden
     *
     * @param parameters
     * @returns
     */
    saveParameterProperties(parameters: {
        [key: string]: {
            displayname: string;
            hidden: boolean;
            order: number;
            tooltip: string;
        };
    }, retry?: boolean): Promise<boolean>;
    saveSettings(json: any, retry?: boolean): Promise<boolean>;
    saveUiProperties(saveInSettings?: boolean): Promise<boolean>;
    updateOutputs(): Promise<ITreeNode>;
    uploadFile(parameterId: string, data: File, type: string, retry?: boolean): Promise<string>;
    uploadGLTF(blob: Blob, conversion?: ShapeDiverRequestGltfUploadQueryConversion, retry?: boolean): Promise<ShapeDiverResponseDto>;
    private _saveSessionSettings;
    private _warningCreator;
    private checkAvailability;
    private customizeInternal;
    private customizeSession;
    private handleError;
    /**
     * Returns a promise that resolves after the amount of milliseconds provided.
     *
     * @param ms the milliseconds
     * @returns promise that resolve after specified milliseconds
     */
    private timeout;
    private updateResponseDto;
}
//# sourceMappingURL=SessionEngine.d.ts.map